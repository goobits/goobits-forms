/* ========================================
 * CHECKBOX COMPONENT STYLES
 * ======================================== */

/* Base Checkbox Styles */
.checkbox {
	display: inline-flex;
	align-items: flex-start;
	gap: var(--space-2);
	position: relative;
	cursor: pointer;
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

.checkbox:has(.checkbox__input:disabled) {
	cursor: not-allowed;
}

/* Hidden Native Checkbox */
.checkbox__input {
	position: absolute;
	opacity: 0;
	width: 0;
	height: 0;
	pointer-events: none;
}

/* Custom Checkbox Box */
.checkbox__box {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
	border: 2px solid var(--color-border-strong);
	border-radius: var(--border-radius-small);
	background-color: var(--color-surface);
	transition: var(--transition-base);
	position: relative;
	box-shadow: var(--shadow-sm);
}

.checkbox__box::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	opacity: 0;
	transition: opacity var(--transition-fast) ease;
}

/* Checkbox Icon */
.checkbox__icon {
	width: 100%;
	height: 100%;
	color: var(--color-text-on-primary);
	opacity: 0;
	transform: scale(0);
	transition: all var(--transition-fast) ease;
}

/* Checked State */
.checkbox__input:checked + .checkbox__box {
	background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-primary-600) 100%);
	border-color: var(--color-primary-600);
	box-shadow: var(--shadow-md);
}

.checkbox__input:checked + .checkbox__box .checkbox__icon--checked {
	opacity: 1;
	transform: scale(1);
}

/* Indeterminate State */
.checkbox--indeterminate .checkbox__box {
	background: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-primary-600) 100%);
	border-color: var(--color-primary-600);
	box-shadow: var(--shadow-md);
}

.checkbox--indeterminate .checkbox__icon--indeterminate {
	opacity: 1;
	transform: scale(1);
}

/* Checkbox Label */
.checkbox__label {
	font-family: var(--font-family-base);
	font-size: var(--font-size-base);
	line-height: var(--line-height-normal);
	color: var(--color-text-primary);
	cursor: pointer;
	padding-top: 2px;
}

.checkbox:has(.checkbox__input:disabled) .checkbox__label {
	color: var(--color-text-disabled);
	cursor: not-allowed;
}

/* Error State */
.checkbox--error .checkbox__box {
	border-color: var(--color-error-500);
	box-shadow: 0 0 0 1px var(--color-error-100);
}

.checkbox--error .checkbox__input:checked + .checkbox__box,
.checkbox--error.checkbox--indeterminate .checkbox__box {
	background: linear-gradient(135deg, var(--color-error-500) 0%, var(--color-error-600) 100%);
	border-color: var(--color-error-600);
}

.checkbox__error {
	color: var(--color-error-600);
	font-size: var(--font-size-small);
	margin-top: var(--space-1);
	margin-left: calc(var(--space-2) + 20px); /* Align with label */
}

/* ========================================
 * SIZE VARIANTS
 * ======================================== */

/* Small */
.checkbox--sm .checkbox__box {
	width: 16px;
	height: 16px;
}

.checkbox--sm .checkbox__label {
	font-size: var(--font-size-small);
}

/* Medium (Default) */
.checkbox--md .checkbox__box {
	width: 20px;
	height: 20px;
}

/* Large */
.checkbox--lg .checkbox__box {
	width: 24px;
	height: 24px;
}

.checkbox--lg .checkbox__label {
	font-size: var(--font-size-medium);
}

/* ========================================
 * STATE MODIFIERS
 * ======================================== */

/* Hover State */
.checkbox:hover:not(.checkbox--disabled) .checkbox__box {
	border-color: var(--color-primary-500);
	box-shadow: 0 0 0 3px var(--color-primary-50);
}

.checkbox:hover:not(.checkbox--disabled) .checkbox__input:checked + .checkbox__box,
.checkbox:hover:not(.checkbox--disabled).checkbox--indeterminate .checkbox__box {
	box-shadow: var(--shadow-lg), 0 0 0 3px var(--color-primary-100);
}

/* Focus State */
.checkbox__input:focus-visible + .checkbox__box {
	outline: none;
	border-color: var(--color-primary-500);
	box-shadow: 0 0 0 3px var(--color-primary-100);
}

.checkbox__input:focus-visible:checked + .checkbox__box,
.checkbox--indeterminate .checkbox__input:focus-visible + .checkbox__box {
	box-shadow: var(--shadow-md), 0 0 0 3px var(--color-primary-200);
}

/* Disabled State */
.checkbox--disabled {
	opacity: 0.5;
}

.checkbox--disabled .checkbox__box {
	background-color: var(--color-background-secondary);
	cursor: not-allowed;
}

.checkbox__input:disabled + .checkbox__box {
	border-color: var(--color-border);
	box-shadow: none;
}

.checkbox__input:disabled:checked + .checkbox__box,
.checkbox--disabled.checkbox--indeterminate .checkbox__box {
	background: var(--color-text-tertiary);
	border-color: var(--color-text-tertiary);
}

/* ========================================
 * ACCESSIBILITY
 * ======================================== */

/* High Contrast Mode */
@media (prefers-contrast: high) {
	.checkbox__box {
		border-width: 3px;
	}

	.checkbox__input:focus-visible + .checkbox__box {
		outline: 3px solid currentColor;
		outline-offset: 2px;
	}

	.checkbox__icon {
		stroke-width: 3;
	}
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
	.checkbox__box {
		transition: none;
	}

	.checkbox__icon {
		transition: none;
	}

	.checkbox__box::before {
		transition: none;
	}
}

/* ========================================
 * TOUCH DEVICES
 * ======================================== */

@media (hover: none) and (pointer: coarse) {
	/* Increase touch target size */
	.checkbox__input {
		min-width: 44px;
		min-height: 44px;
	}

	.checkbox--sm .checkbox__box {
		width: 20px;
		height: 20px;
	}

	/* Disable hover effects on touch devices */
	.checkbox:hover:not(.checkbox--disabled) .checkbox__box {
		border-color: var(--color-border-strong);
		box-shadow: var(--shadow-sm);
	}

	.checkbox:hover:not(.checkbox--disabled) .checkbox__input:checked + .checkbox__box,
	.checkbox:hover:not(.checkbox--disabled).checkbox--indeterminate .checkbox__box {
		box-shadow: var(--shadow-md);
	}
}
